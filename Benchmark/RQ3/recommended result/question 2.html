<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/layui/2.6.8/css/layui.min.css">
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/layui/2.6.8/layui.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.1.8/vue.min.js"></script>
</head>
<style type="text/css">
body {
  background-color: #F4F5F6;
  margin: 0;
  padding: 0;
}

.layui-container {
  margin-top: 50px;
  width: 80vw;
  line-height: 40px;
}

.layui-table {
  margin: 0;
  width: 100%;
  table-layout: fixed;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI Adjusted", "Segoe UI", "Liberation Sans", sans-serif;
}

.layui-table ol li {
  list-style: decimal;
  margin-left: 30px;
}

.layui-table td {
  padding: 5px 15px;
  font-size: 14px;
  color: #232629;
  line-height: 20px;
  border: none;
  border-bottom: 0px solid #FFFFFF;
}

.layui-table a {
  font-size: 14px;
  line-height: 20px;
}

.layui-table .left-font {
  text-align: right;
  vertical-align: top;
  font-size: 15px;
  background-color: #F2F3F4;
}

.layui-table[lay-even] tr:nth-child(even) {
  background-color: #F2F3F4;
}

.layui-table[lay-even] tr:nth-child(odd) {
  background-color: #F2F3F4;
}

.layui-panel {
  font-size: 12px;
  color: #232629;
  margin: 10px 0 50px;
  padding: 9px 0;
  background-color: #F2F3F4;
}

.layui-panel a:hover {
  color: #3B4045;
}

.layui-panel .title {
  padding: 5px;
  font-size: 25px;
  line-height: 40px;
  margin: 0 20px 0;
  color: #3B4045;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI Adjusted", "Segoe UI", "Liberation Sans", sans-serif;
}

/*mark {*/
/*    background-color: #F0B27A;*/
/*    padding: 1px 3px 1px;*/
/*    border-radius: 3px;*/
/*    line-height: 16px;*/
/*    margin: 0 1px;*/
/*}*/

/*em {*/
/*    font-family: Georgia, Cambria, "Times New Roman", Times, serif;*/
/*    font-size: 15px;*/
/*    margin: 0 5px;*/
/*    text-decoration: underline;*/
/*}*/

/*.layui-table ol li mark {*/
/*    background-color: #CACFD2;*/
/*}*/

code {
  font-family: ui-monospace, "Cascadia Mono", "Segoe UI Mono", "Liberation Mono", Menlo, Monaco, Consolas, monospace;
  font-size: 12px;
  border-radius: 3px;
  line-height: 20px;
  word-wrap: normal;
}

pre {
  padding: 12px;
  width: auto;
  overflow: auto;
  background-color: #E7E8E9;
  border-radius: 3px;
}

.answer-title a {
  font-size: 18px;
  font-weight: bold;
}
</style>

<body>
  <div id="app" class="layui-container">
    <div class="layui-row layui-col-space15">
      <div class="layui-col-md12">
        <div class="layui-panel" style="margin-bottom: 30px;">
          <div class="title"><strong>Query:&nbsp;&nbsp;</strong>
            <a :href="'https://stackoverflow.com/questions/'+post_id" target="_blank" v-html="title">
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="layui-panel" v-for="(answer, index) in answer">
      <table class="layui-table" lay-even>
        <colgroup>
          <col width="14%">
          <col width="86%">
        </colgroup>
        <tbody>
          <tr>
            <td rowspan="1" class="left-font">
              <strong>Id&nbsp;[<span>{{answer.answer_id}}</span>]</strong>
            </td>
            <td>
              <div class="answer-title">
                <a :href="'https://stackoverflow.com/questions/'+answer.answer_id" target="_blank" v-html="answer.title">
                </a>
              </div>
            </td>
          </tr>
          <tr>
            <td rowspan="1" class="left-font">
              <strong>Environment</strong>
            </td>
            <td>
              <strong>{{answer.environment.join(", ")}}</strong>
            </td>
          </tr>
          <tr>
            <td rowspan="1" class="left-font">
              <strong>Extra Info</strong>
            </td>
            <td>
              <span class="layui-badge layui-bg-black">ViewCount:&nbsp;{{answer.ViewCount}}</span>
              <span class="layui-badge layui-bg-black">Score:&nbsp;{{answer.Score}}</span>
              <span class="layui-badge layui-bg-black">AnswerScore:&nbsp;{{answer.AnswerScore}}</span>
              <span class="layui-badge layui-bg-black">Environment Score:&nbsp;{{answer.environment_score}}</span>
              <span v-show="answer.exception_message_score" class="layui-badge layui-bg-black">Exception Message Score:&nbsp;{{answer.exception_message_score}}</span>
              <span v-show="answer.exception_stack_score" class="layui-badge layui-bg-black">Exception Stack
                Score:&nbsp;{{answer.exception_stack_score}}</span>
              <span v-show="answer.code_score" class="layui-badge layui-bg-black">Code
                Score:&nbsp;{{answer.code_score}}</span>
              <span v-show="answer.symptom_score" class="layui-badge layui-bg-black">Symptom
                Score:&nbsp;{{answer.symptom_score}}</span>
              <span v-show="answer.purpose_score" class="layui-badge layui-bg-black">Purpose
                Score:&nbsp;{{answer.purpose_score}}</span>
            </td>
          </tr>
          <!--          <tr>-->
          <!--            <td rowspan="1" class="left-font">-->
          <!--              <strong>Exception Stack</strong>-->
          <!--            </td>-->
          <!--            <td>-->
          <!--              <div v-for="(exc,) in answer.exception_stack">-->
          <!--                <pre style="max-height: 300px"><code>{{exc}}</code></pre>-->
          <!--              </div>-->
          <!--            </td>-->
          <!--          </tr>-->
          <tr v-show="answer.exception_message">
            <td rowspan="1" class="left-font">
              <strong>Exception Message</strong>
            </td>
            <td>
              <div>
                <pre style="max-height: 300px"><code>{{answer.exception_message}}</code></pre>
              </div>
            </td>
          </tr>
          <tr v-show="answer.symptom">
            <td rowspan="1" class="left-font">
              <strong>Symptom</strong>
            </td>
            <td>
              <p v-for="(symptom,) in answer.symptom">{{symptom}}</p>
            </td>
          </tr>
          <tr v-show="answer.code.length>0">
            <td rowspan="1" class="left-font">
              <strong></strong>
            </td>
            <td>
              <div class="layui-collapse">
                <div class="layui-colla-item" v-for="(code,i) in answer.code">
                  <h2 class="layui-colla-title">code {{i + 1}}</h2>
                  <pre class="layui-colla-content" style="max-height: 300px"><code>{{code}}</code></pre>
                </div>
              </div>
            </td>
          </tr>
          <tr v-show="answer.reason.length>0">
            <td rowspan="1" class="left-font">
              <strong>Reason</strong>
            </td>
            <td>
              <p v-for="(reason,) in answer.reason">{{reason}}</p>
            </td>
          </tr>
          <tr>
            <td rowspan="1" class="left-font">
              <strong>Solution</strong>
            </td>
            <td>
              <p v-for="(solution,) in answer.solution">{{solution}}</p>
            </td>
          </tr>
          <tr v-show="answer.answer_code.length>0">
            <td rowspan="1" class="left-font">
              <strong></strong>
            </td>
            <td>
              <div class="layui-collapse">
                <div class="layui-colla-item" v-for="(answer_code, i) in answer.answer_code">
                  <h2 class="layui-colla-title">code {{i + 1}}</h2>
                  <pre class="layui-colla-content" style="max-height: 600px"><code>{{answer_code}}</code></pre>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <script type="text/javascript">
  const vm = new Vue({
    el: '#app',
    data: JSON.parse(JSON.stringify({"post_id": "12623651", "exception_type": "SQLException", "environment": "mysql", "title": "ERROR: Error 1005: Can't create table (errno: 121)", "answer": [{"answer_id": "32839886", "title": "SQL Exception:can not create table", "Score": 0, "ViewCount": 937, "LastEditDate": "2015-09-29 09:00:38", "LastActivityDate": "2015-09-29 09:22:47", "AnswerScore": 0, "reason": ["err 121 indicates that the constraint name is already used. "], "solution": ["Change your constraint name. ", "Constraint name should be unique within your database. ", "To see if the constraint already exists. -CODE-"], "answer_code": ["SELECT\n    table_name\nFROM\n    information_schema.table_constraints\nWHERE\n    constraint_type = 'FOREIGN KEY'\n    AND table_schema = DATABASE() AND\n    constraint_name = 'fk_dummy_1'\n"], "environment": ["java", "jdbc", "mysql", "sqlexception"], "symptom": ["when i run the code this error follows: -CODE-. following is my my code: -CODE-'conn' is my database instance and 'defaultStmt' is a PreparedStatement"], "exception_stack": ["Exception in thread \"main\" java.sql.SQLException: Can't create table 'Sensors_db.one' (errno: 121)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3609)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3541)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2002)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2163)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2624)\n    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2127)\n    at com.mysql.jdbc.PreparedStatement.execute(PreparedStatement.java:1362)\n    at sensordev.SensorDev.sensorPage(SensorDev.java:283)\n    at sensordev.SensorDev.main(SensorDev.java:893)\n"], "code": ["String type = \"37\";\n        String senName = \"one\";\n        String query;\n        switch(type){\n            case \"37\":{\n\n                query = \"CREATE TABLE IF NOT EXISTS `\"+ senName +\"` (\"\n                        + \"  `Name` VARCHAR(45) NOT NULL,\"\n                        + \"  `State` VARCHAR(45) NOT NULL,\"\n                        + \"  `Time` TIME NOT NULL,\"\n                        + \"  PRIMARY KEY (`Time`, `State`),\"\n                        + \"  INDEX `fk_dummy_1_idx` (`Name` ASC),\"\n                        + \"  CONSTRAINT `fk_dummy_1`\"\n                        + \"    FOREIGN KEY (`Name`)\"\n                        + \"    REFERENCES `Sensors_db`.`sensorInfo` (`SName`)\"\n                        + \"    ON DELETE NO ACTION\"\n                        + \"    ON UPDATE NO ACTION);\";\n                defaultStmt = conn.prepareStatement(query);\n                 defaultStmt.execute();\n"], "exception_message_rank": 0, "exception_stack_rank": 1, "code_rank": 8, "exception_message": "Exception in thread \"main\" java.sql.SQLException: Can't create table 'Sensors_db.one' (errno: 121)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)\n", "exception_message_score": 100, "exception_stack_score": 97, "code_score": 76}, {"answer_id": "60179279", "title": "Hibernate can't create a table: org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table PSQLException", "Score": 1, "ViewCount": 2000, "LastEditDate": "", "LastActivityDate": "2020-02-12 15:44:43", "AnswerScore": 3, "reason": ["Hibernate is very popular (but not with me personally), so I doubt it can be so broken that it can't return real error messages, so I think you just aren't reading them correctly. ", "The problem here is that column is a reserved word in PostgreSQL. ", "But it would be better just to name it something else like board_column. row is not a fully reserved word in PostgreSQL, so you can use it, but I would not do so", "Rename it to something like board_row. "], "solution": ["In any event, you can look in PostgreSQL's log file to find the real error message. ", "If I take the statement from the message you show and run it in psql, I get: -CODE-. ", "You can't use it as the name of a column, unless you put it in double quotes. ", "I don't know how to tell hibernate to put it in double quotes, but I'm sure there is a way. ", "But it would be better just to name it something else like board_column. row is not a fully reserved word in PostgreSQL, so you can use it, but I would not do so", "Rename it to something like board_row. "], "answer_code": [], "environment": ["postgresql", "jpa", "hibernate-mapping", "hibernate", "java"], "symptom": ["I have 5 entities: Field, Game, Move, Player and User. ", "A game has two players and one player is only ever associated with one game; a user is associated with many players, a player can make many moves, while each move can only have one player; a game has two players and many moves and many fields. ", "Hibernate creates tables and constraints for 4 of them with no issues. ", "However when it tries to create a table for the Move entity it throws an exception: -CODE-. and then later: -CODE-several times", "I don't understand what's wrong witht the Move entity. "], "exception_stack": ["org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table moves (id int4 not null, column int4 not null, row int4 not null, game_id int4, player_id int4, primary key (id))\" via JDBC Statement\n", "org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl handleException\nWARN: GenerationTarget encountered exception accepting command : Error executing DDL \"alter table moves add constraint FKjv33kkwwhe6121266nmuk7y1d foreign key (game_id) references games\" via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table moves add constraint FKjv33kkwwhe6121266nmuk7y1d foreign key (game_id) references games\" via JDBC Statement\n"], "code": ["package noughtsandcrosses.entity;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = \"fields\")\npublic class Field {\n    @Id\n    @GeneratedValue\n    private int id;\n\n    private int[][] field;\n\n    @ManyToOne\n    @JoinColumn(name = \"game_id\")\n    private Game game;\n\n    public void update(Move move)  {\n\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public int[][] getField() {\n        return field;\n    }\n\n    public void setField(int[][] field) {\n        this.field = field;\n    }\n\n    public Game getGame() {\n        return game;\n    }\n\n    public void setGame(Game game) {\n        this.game = game;\n    }\n}\n", "package noughtsandcrosses.entity;\n\nimport javax.persistence.*;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@Table(name = \"games\")\npublic class Game {\n    @Id @GeneratedValue\n    private int id;\n\n    @OneToOne\n    @JoinColumn(name = \"crosses_player_id\")\n    private Player crossesPlayer;\n    @OneToOne\n    @JoinColumn(name = \"noughts_player_id\")\n    private Player noughtsPlayer;\n\n    @OneToMany(mappedBy = \"game\")\n    private List<Move> moves;\n\n    @OneToMany(mappedBy = \"game\")\n    private List<Field> fields;\n\n    public Game(Player crossesPlayer, Player noughtsPlayer) {\n        this.crossesPlayer = crossesPlayer;\n        this.noughtsPlayer = noughtsPlayer;\n    }\n\n\n    public Player getCrossesPlayer() {\n        return crossesPlayer;\n    }\n\n    public void setCrossesPlayer(Player crossesPlayer) {\n        this.crossesPlayer = crossesPlayer;\n    }\n\n    public Player getNoughtsPlayer() {\n        return noughtsPlayer;\n    }\n\n    public void setNoughtsPlayer(Player noughtsPlayer) {\n        this.noughtsPlayer = noughtsPlayer;\n    }\n\n    public List<Move> getMoves() {\n        return moves;\n    }\n\n    public void setMoves(List<Move> moves) {\n        this.moves = moves;\n    }\n\n    public List<Field> getFields() {\n        return fields;\n    }\n\n    public void setFields(List<Field> fields) {\n        this.fields = fields;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n}\n", "package noughtsandcrosses.entity;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(name = \"moves\")\npublic class Move {\n    @Id\n    @GeneratedValue\n    private int id;\n\n    @ManyToOne\n    @JoinColumn(name = \"player_id\")\n    private Player player;\n\n    @ManyToOne\n    @JoinColumn(name = \"game_id\")\n    private Game game;\n\n    private int row;\n    private int column;\n\n    public Move()  {}\n\n    public Move(Player player, int row, int column) {\n        this.player = player;\n        this.row = row;\n        this.column = column;\n    }\n\n    public Player getPlayer() {\n        return player;\n    }\n\n    public int getRow() {\n        return row;\n    }\n\n    public int getColumn() {\n        return column;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public void setPlayer(Player player) {\n        this.player = player;\n    }\n\n    public void setRow(int row) {\n        this.row = row;\n    }\n\n    public void setColumn(int column) {\n        this.column = column;\n    }\n\n    public Game getGame() {\n        return game;\n    }\n\n    public void setGame(Game game) {\n        this.game = game;\n    }\n}\n", "package noughtsandcrosses.entity;\n\nimport javax.persistence.*;\nimport java.util.List;\n\n@Entity\n@Table(name = \"players\")\npublic class Player {\n    @Id @GeneratedValue\n    private int id;\n\n    private enum Alignment {\n        NOUGHTS, CROSSES\n    };\n    private Alignment alignment;\n\n    @ManyToOne\n    private User user;\n\n    @OneToMany(mappedBy = \"player\")\n    private List<Move> moves;\n\n    public Player() {\n\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public Alignment getAlignment() {\n        return alignment;\n    }\n\n    public void setAlignment(Alignment alignment) {\n        this.alignment = alignment;\n    }\n\n    public User getUser() {\n        return user;\n    }\n\n    public void setUser(User user) {\n        this.user = user;\n    }\n\n    public List<Move> getMoves() {\n        return moves;\n    }\n\n    public void setMoves(List<Move> moves) {\n        this.moves = moves;\n    }\n}\n", "package noughtsandcrosses.entity;\n\nimport javax.persistence.*;\nimport java.util.*;\n\n@Entity\n@Table(name = \"users\")\n@Inheritance(strategy = InheritanceType.JOINED)\npublic class User {\n    @Id\n    @GeneratedValue\n    private int id;\n\n    private String username;\n    private String password;\n\n    @OneToMany(mappedBy=\"user\")\n    private List<Player> players;\n\n    public User()  {}\n\n    public User(String username, String password) {\n        this.username = username;\n        this.password = password;\n    }\n\n    public User(String username)  {\n        this.username = username;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public List<Player> getPlayers() {\n        return players;\n    }\n\n    public void setPlayers(List<Player> players) {\n        this.players = players;\n    }\n}\n"], "exception_message_rank": 7, "exception_stack_rank": 9, "exception_message": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table moves (id int4 not null, column int4 not null, row int4 not null, game_id int4, player_id int4, primary key (id))\" via JDBC Statement\n", "exception_message_score": 79, "exception_stack_score": 73}, {"answer_id": "52026671", "title": "Hibernate: create table Exception", "Score": 0, "ViewCount": 4416, "LastEditDate": "2018-08-26 13:36:38", "LastActivityDate": "2018-08-26 14:08:08", "AnswerScore": 8, "reason": ["Your error is because of this statement in your class i think : -CODE-. "], "solution": ["Edit : It should be like this way : -CODE-. ", "Edit 1 : \"GROUP. is a SQL reserved keyword and should not be used as an attribute name", "Check here. https://stackoverflow.com/questions/19758467/h2-database-column-name-group-is-a-reserved-word"], "answer_code": ["private String group = \"\";\n", "private String group; \n"], "environment": ["h2", "h2 database", "hibernate", "java", "jdbc", "spring"], "symptom": ["I all over sudden have a hibernate exception and cannot find the issue. ", "My app was actually working quite good so far but somehere/somehow/somewhen I must have changed something causing an error. ", "Here the error: -CODE-. this class: -CODE-application.properties", "For testing purposes I have added create-drop usually I use update but it doesn't change anything. -CODE-", "POM-dependencies: Last what I changed here was to remove <scope>runtime</scope> at the H2 database dependency. ", "But even reverse it results in the same error. -CODE-"], "exception_stack": ["2018-08-26 15:07:41.273  INFO 4580 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.2.Final}\n2018-08-26 15:07:41.274  INFO 4580 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2018-08-26 15:07:41.330  INFO 4580 --- [  restartedMain] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\n2018-08-26 15:07:41.418  INFO 4580 --- [  restartedMain] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\n2018-08-26 15:07:41.845  INFO 4580 --- [  restartedMain] org.hibernate.tuple.PojoInstantiator     : HHH000182: No default (no-argument) constructor for class: com.trademerger.trading.observable.TradeDistributingUnitExchange (class must be instantiated by Interceptor)\nHibernate: drop table single_unit_abc if exists\nHibernate: drop table trade_distributing_unit_abc if exists\nHibernate: drop table trade_distributing_unit_abc_observer_list if exists\nHibernate: drop table user_data_storage if exists\nHibernate: drop sequence if exists hibernate_sequence\nHibernate: create sequence hibernate_sequence start with 1 increment by 1\nHibernate: create table single_unit_abc (dtype varchar(31) not null, observer_id bigint not null, amount_of_coins_bought double not null, bid_active boolean not null, buy_profit double not null, id double not null, last_price double not null, order_number bigint not null, percantage_this_bot_can_take_frombtc double not null, sell_active boolean not null, sell_price double not null, sell_profit double not null, time_of_last_bid_order bigint not null, stop_received varchar(255), trade_distributing_unit_abc_objectid bigint, primary key (observer_id))\nHibernate: create table trade_distributing_unit_abc (dtype varchar(31) not null, objectid bigint not null, command integer, group varchar(255), reduce boolean,  primary key (objectid))\n2018-08-26 15:07:41.931  WARN 4580 --- [  restartedMain] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL \"create table trade_distributing_unit_abc (dtype varchar(31) not null, objectid bigint not null, command integer, group varchar(255), reduce boolean, primary key (objectid))\" via JDBC Statement\n\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table trade_distributing_unit_abc (dtype varchar(31) not null, objectid bigint not null, command integer, group varchar(255), reduce boolean, primary key (objectid))\" via JDBC Statement\n\nCaused by: org.h2.jdbc.JdbcSQLException: Syntax Fehler in SQL Befehl \"CREATE TABLE TRADE_DISTRIBUTING_UNIT_ABC (DTYPE VARCHAR(31) NOT NULL, OBJECTID BIGINT NOT NULL, COMMAND INTEGER, GROUP[*] VARCHAR(255), REDUCE BOOLEAN, PRIMARY KEY (OBJECTID)) \"; erwartet \"identifier\"\nSyntax error in SQL statement \"CREATE TABLE TRADE_DISTRIBUTING_UNIT_ABC (DTYPE VARCHAR(31) NOT NULL, OBJECTID BIGINT NOT NULL, COMMAND INTEGER, GROUP[*] VARCHAR(255), REDUCE BOOLEAN,  PRIMARY KEY (OBJECTID)) \"; expected \"identifier\"; SQL statement:\ncreate table trade_distributing_unit_abc (dtype varchar(31) not null, objectid bigint not null, command integer, group varchar(255), reduce boolean, primary key (objectid)) [42001-197]\n\n\nHibernate: create table trade_distributing_unit_abc_observer_list (trade_distributing_unit_abc_objectid bigint not null, observer_list_observer_id bigint not null)\nHibernate: create table user_data_storage (fee_storage_id bigint not null, api_key varchar(255), api_secret varchar(255), crash_indicator_active boolean not null, fee double not null, fee_must_be_paid boolean not null, lending_on boolean not null, password varchar(255), time_of_last_payment bigint not null, username varchar(255), volume_indicator_active boolean not null, primary key (fee_storage_id))\nHibernate: alter table trade_distributing_unit_abc_observer_list add constraint UK_2uiqrt4b7kfuy0tlp5l7vvfyq unique (observer_list_observer_id)\nHibernate: alter table single_unit_abc add constraint FKt4jg8bdgi9hnjp6fx4mgs27n foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\n2018-08-26 15:07:41.941  WARN 4580 --- [  restartedMain] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL \"alter table single_unit_abc add constraint FKt4jg8bdgi9hnjp6fx4mgs27n foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\n\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table single_unit_abc add constraint FKt4jg8bdgi9hnjp6fx4mgs27n foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\n\nCaused by: org.h2.jdbc.JdbcSQLException: Tabelle \"TRADE_DISTRIBUTING_UNIT_ABC\" nicht gefunden\nTable \"TRADE_DISTRIBUTING_UNIT_ABC\" not found; SQL statement:\nalter table single_unit_abc add constraint FKt4jg8bdgi9hnjp6fx4mgs27n foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc [42102-197]\n\n\nHibernate: alter table trade_distributing_unit_abc_observer_list add constraint FK1xf8ji3rqb6qqncywcju013qo foreign key (observer_list_observer_id) references single_unit_abc\nHibernate: alter table trade_distributing_unit_abc_observer_list add constraint FK8yjbuf5pqdfnn4rwlt9ghfgl6 foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\n2018-08-26 15:07:41.946  WARN 4580 --- [  restartedMain] o.h.t.s.i.ExceptionHandlerLoggedImpl     : GenerationTarget encountered exception accepting command : Error executing DDL \"alter table trade_distributing_unit_abc_observer_list add constraint FK8yjbuf5pqdfnn4rwlt9ghfgl6 foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\n\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table trade_distributing_unit_abc_observer_list add constraint FK8yjbuf5pqdfnn4rwlt9ghfgl6 foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\n\nCaused by: org.h2.jdbc.JdbcSQLException: Tabelle \"TRADE_DISTRIBUTING_UNIT_ABC\" nicht gefunden\nTable \"TRADE_DISTRIBUTING_UNIT_ABC\" not found; SQL statement:\nalter table trade_distributing_unit_abc_observer_list add constraint FK8yjbuf5pqdfnn4rwlt9ghfgl6 foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc [42102-197]\n"], "code": ["@Entity\npublic abstract class TradeDistributingUnitAbc {\n\n    //@OneToMany(mappedBy = \"tradeDistributingUnitAbc\", cascade = CascadeType.ALL, fetch = FetchType.EAGER, orphanRemoval = true)\n    @OneToMany\n    private List<SingleUnitAbc> observerList = Collections.synchronizedList(new LinkedList<>());\n\n    @Transient\n    private final Logger logger = LoggerFactory.getLogger(TradeDistributingUnitAbc.class);\n\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private long objectID;\n\n    private Commands command;\n\n\n    private String group = \"\";\n\n\n    public TradeDistributingUnitAbc() {\n    }\n\n}\n", "spring.datasource.url=jdbc:h2:file:~/tmv2;DB_CLOSE_ON_EXIT=FALSE;AUTO_RECONNECT=TRUE\nspring.datasource.username=admin\nspring.datasource.password=password\nspring.datasource.driver-class-name=org.h2.Driver\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect\n", "<dependencies>\n        <dependency>\n            <groupId>org.apache.httpcomponents</groupId>\n            <artifactId>httpclient</artifactId>\n            <version>4.5.6</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-websocket</artifactId>\n            <version>2.0.3.RELEASE</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-security</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-thymeleaf</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-web</artifactId>\n        </dependency>\n        <dependency>\n            <groupId>com.h2database</groupId>\n            <artifactId>h2</artifactId>\n            <version>1.4.197</version>\n        </dependency>\n        <dependency>\n            <groupId>org.projectlombok</groupId>\n            <artifactId>lombok</artifactId>\n            <optional>true</optional>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.security</groupId>\n            <artifactId>spring-security-test</artifactId>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.webjars</groupId>\n            <artifactId>jquery</artifactId>\n            <version>3.3.1-1</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-jdbc</artifactId>\n            <version>2.0.4.RELEASE</version>\n        </dependency>\n        <!--      <dependency>\n                  <groupId>org.springframework</groupId>\n                  <artifactId>spring-jdbc</artifactId>\n                  <version>5.0.7.RELEASE</version>\n              </dependency>-->\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-starter-data-jpa</artifactId>\n            <version>2.0.4.RELEASE</version>\n        </dependency>\n        <dependency>\n            <groupId>org.hibernate</groupId>\n            <artifactId>hibernate-entitymanager</artifactId>\n            <version>5.3.2.Final</version>\n        </dependency>\n        <dependency>\n            <groupId>org.hibernate</groupId>\n            <artifactId>hibernate-core</artifactId>\n            <version>5.3.2.Final</version>\n        </dependency>\n        <dependency>\n            <groupId>javax.xml.bind</groupId>\n            <artifactId>jaxb-api</artifactId>\n            <version>2.3.0</version>\n        </dependency>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-devtools</artifactId>\n            <version>2.0.3.RELEASE</version>\n            <scope>runtime</scope>\n        </dependency>\n        <dependency>\n            <groupId>org.webjars</groupId>\n            <artifactId>bootstrap</artifactId>\n            <version>4.1.1</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-annotations</artifactId>\n            <version>2.9.6</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-core</artifactId>\n            <version>2.9.6</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-databind</artifactId>\n            <version>2.9.6</version>\n        </dependency>\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.12</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/org.mockito/mockito-core -->\n        <dependency>\n            <groupId>org.mockito</groupId>\n            <artifactId>mockito-core</artifactId>\n            <version>2.21.0</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/org.powermock/powermock-module-junit4 -->\n        <dependency>\n            <groupId>org.powermock</groupId>\n            <artifactId>powermock-module-junit4</artifactId>\n            <version>2.0.0-beta.5</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/org.powermock/powermock-api-mockito -->\n        <!-- https://mvnrepository.com/artifact/org.powermock/powermock-core -->\n        <dependency>\n            <groupId>org.powermock</groupId>\n            <artifactId>powermock-core</artifactId>\n            <version>2.0.0-beta.5</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/org.powermock/powermock-api-mockito2 -->\n        <dependency>\n            <groupId>org.powermock</groupId>\n            <artifactId>powermock-api-mockito2</artifactId>\n            <version>2.0.0-beta.5</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/net.bytebuddy/byte-buddy -->\n        <dependency>\n            <groupId>net.bytebuddy</groupId>\n            <artifactId>byte-buddy</artifactId>\n            <version>1.8.17</version>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/net.bytebuddy/byte-buddy-agent -->\n        <dependency>\n            <groupId>net.bytebuddy</groupId>\n            <artifactId>byte-buddy-agent</artifactId>\n            <version>1.8.17</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- https://mvnrepository.com/artifact/org.objenesis/objenesis -->\n        <dependency>\n            <groupId>org.objenesis</groupId>\n            <artifactId>objenesis</artifactId>\n            <version>2.6</version>\n            <scope>test</scope>\n        </dependency>\n    </dependencies>\n"], "exception_message_rank": 8, "exception_stack_rank": 5, "exception_message": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table trade_distributing_unit_abc (dtype varchar(31) not null, objectid bigint not null, command integer, group varchar(255), reduce boolean, primary key (objectid))\" via JDBC Statement\nCaused by: org.h2.jdbc.JdbcSQLException: Syntax Fehler in SQL Befehl \"CREATE TABLE TRADE_DISTRIBUTING_UNIT_ABC (DTYPE VARCHAR(31) NOT NULL, OBJECTID BIGINT NOT NULL, COMMAND INTEGER, GROUP[*] VARCHAR(255), REDUCE BOOLEAN, PRIMARY KEY (OBJECTID)) \"; erwartet \"identifier\"\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table single_unit_abc add constraint FKt4jg8bdgi9hnjp6fx4mgs27n foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\nCaused by: org.h2.jdbc.JdbcSQLException: Tabelle \"TRADE_DISTRIBUTING_UNIT_ABC\" nicht gefunden\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table trade_distributing_unit_abc_observer_list add constraint FK8yjbuf5pqdfnn4rwlt9ghfgl6 foreign key (trade_distributing_unit_abc_objectid) references trade_distributing_unit_abc\" via JDBC Statement\nCaused by: org.h2.jdbc.JdbcSQLException: Tabelle \"TRADE_DISTRIBUTING_UNIT_ABC\" nicht gefunden\n", "exception_message_score": 76, "exception_stack_score": 85}, {"answer_id": "9385395", "title": "SQLException: Can't create table errno 150/foreign key", "Score": 1, "ViewCount": 2508, "LastEditDate": "", "LastActivityDate": "2012-02-21 21:33:52", "AnswerScore": 2, "reason": ["You have to create table FooTypes before Users, as it uses the reference of FooTypes even before FooTypes exist, means violation of Foreign Key constraint, that is, FooTypes(id. must be exist before providing Users(fooTypeits reference"], "solution": ["You have to create table FooTypes before Users, as it uses the reference of FooTypes even before FooTypes exist, means violation of Foreign Key constraint, that is, FooTypes(id. must be exist before providing Users(fooTypeits reference"], "answer_code": [], "environment": ["errno 150", "footype", "mysql", "foreign-keys", "mysql 5.1.49", "java"], "symptom": ["After doing some research, it would seem that errno 150 occurs when either table engine types don't match, or when foreign key creation fails for whatever reason. ", "So, my table engines match both explicitly and implicitly (I'm using MySQL 5.1.49, which uses InnoDB by default AFAIK). ", "So the only difference is that Users.fooType has a default. "], "exception_stack": [], "code": ["CREATE TABLE IF NOT EXISTS Users \n(\n    id INT UNSIGNED NOT NULL AUTO_INCREMENT,\n    fooType INT UNSIGNED NOT NULL DEFAULT 0,\n    ...More columns, nothing special...\n    PRIMARY KEY (`id`), \n    CONSTRAINT Users_fooType_fk \n        FOREIGN KEY (fooType) \n        REFERENCES FooTypes (id)\n        ON DELETE CASCADE\n) ENGINE = InnoDB#\n\nCREATE TABLE IF NOT EXISTS FooTypes\n(\n    id INT UNSIGNED NOT NULL AUTO_INCREMENT,\n    ...More columns, nothing special...\n    PRIMARY KEY (`id`) \n) ENGINE = InnoDB#\n"], "exception_message_rank": 1, "exception_message": "", "exception_message_score": 97}, {"answer_id": "6920157", "title": "Error when changing DB engine from MyIsam to innoDB", "Score": 2, "ViewCount": 532, "LastEditDate": "2011-08-03 09:26:59", "LastActivityDate": "2011-08-03 10:46:05", "AnswerScore": 3, "reason": ["The problem is that InnoDB unlike MyIsam cannot use an unsigned int as a foreign key. "], "solution": ["In my example I had to change the: -CODE-. line: to: -CODE-pretty simple I just didn't know it acted this way"], "answer_code": ["`creatorId` INT UNSIGNED NOT NULL,\n", "`creatorId` INT NOT NULL,\n"], "environment": ["innodb", "db tables", "mysql", "database", "mysql db", "myisam", "java", "db engines"], "symptom": ["I've changed my DB engine of my Java webapplication to innoDB from MyIsam. ", "I'm using a MySql DB. ", "For some reason I now get an error on the creation of my db tables which are added through a batch. ", "The error i get is: java.sql.BatchUpdateException. ", "What are the implications of changing between these two DB engines and how do I correct what I've wronged. ", "The DB commands that are not working with innoDB but worked with MyIsam: -CODE-. "], "exception_stack": ["java.sql.SQLException: Can't create table 'schedule.course2user' (errno: 150)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3562)\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3494)\n    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1960)\n    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2114)\n    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2690)\n    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1648)\n    at com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1567)\n    at database.DBCreator.execList(DBCreator.java:203)\n    at database.DBCreator.createDatabase(DBCreator.java:215)\n    at database.DBCreator.main(DBCreator.java:248)\n"], "code": ["CREATE  TABLE IF NOT EXISTS `schedule`.`course` (\n`id` INT NOT NULL AUTO_INCREMENT ,\n`name` VARCHAR(45) NOT NULL UNIQUE,\n`description` BLOB ,\n`credits` TINYINT(1) DEFAULT '0' ,\n`capacity` INT DEFAULT '0' ,\n`isRemoved` TINYINT(1)  NULL DEFAULT '0' ,\n`groupId` INT  NULL DEFAULT '0' ,\n`creatorId` INT UNSIGNED NOT NULL ,\nPRIMARY KEY (`id`) ,\nINDEX `fk_creator` (`creatorId` ASC) ,\nCONSTRAINT `fk_creator` FOREIGN KEY (`creatorId` )REFERENCES `schedule`.`course` (`id` ) ON DELETE CASCADE ON UPDATE NO ACTION ) \nENGINE = innoDB DEFAULT CHARACTER SET = utf8;\n"], "exception_message_rank": 2, "exception_stack_rank": 2, "code_rank": 0, "exception_message": "java.sql.SQLException: Can't create table 'schedule.course2user' (errno: 150)\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1075)\n", "exception_message_score": 94, "exception_stack_score": 94, "code_score": 100}, {"answer_id": "32883400", "title": "Java MySQL SyntaxErrorException", "Score": 2, "ViewCount": 142, "LastEditDate": "", "LastActivityDate": "2016-05-06 12:19:41", "AnswerScore": 1, "reason": ["Your problem may be due to the fact that you didn't set the multiple query property on your database connection, so it is executing only the first statement. "], "solution": ["Try modifying the database url like this: -CODE-. "], "answer_code": ["jdbc:mysql:<your_url>?allowMultiQueries=true\n"], "environment": ["mysql", "java", "mysql workbench", "mysql-workbench"], "symptom": ["I'm trying to create a database using java. ", "After running this I get: -CODE-. ", "The database is created, but the tables are not. ", "When I paste this query into MySQL Workbench and execute it . it works perfectly and creates everything I need"], "exception_stack": ["com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error  in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'use Contacts;CREATE TABLE IF NOT EXISTS info(first_name TEXT,surname TEXT,login ' at line 1\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\nat java.lang.reflect.Constructor.newInstance(Unknown Source)\nat com.mysql.jdbc.Util.handleNewInstance(Util.java:400)\nat com.mysql.jdbc.Util.getInstance(Util.java:383)\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:980)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3847)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3783)\nat com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2447)\nat com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2594)\nat com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2541)\nat com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1604)\nat com.mysql.jdbc.StatementImpl.executeUpdate(StatementImpl.java:1535)\nat task.DatabaseManager.createDatabase(DatabaseManager.java:28)\nat task.Test.main(Test.java:14)\nConnection closed\n"], "code": ["public void createDatabase(String user, String password) {\n    String query = \"CREATE DATABASE IF NOT EXISTS Contacts;use Contacts;CREATE TABLE IF NOT EXISTS info(first_name TEXT,surname TEXT,login TEXT,email TEXT,phone_number INT NOT NULL primary key)\";\n    Connection connection = createConnection(user, password);\n        try {\n        Statement statement = connection.createStatement();\n        int result = statement.executeUpdate(query);\n        System.out.println(\"Database is ready for use\");\n    } catch (SQLException e1) {\n        e1.printStackTrace();\n    }\nfinally {\n        if (connection != null)\n            try {\n                connection.close();\n                System.out.println(\"Connection closed\");\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n"], "environment_rank": 0, "exception_message_rank": 29, "exception_stack_rank": 24, "exception_message": "com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error  in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'use Contacts;CREATE TABLE IF NOT EXISTS info(first_name TEXT,surname TEXT,login ' at line 1\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:980)\n", "environment_score": 100, "exception_message_score": 13, "exception_stack_score": 28}, {"answer_id": "68599285", "title": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL create table index", "Score": 0, "ViewCount": 358, "LastEditDate": "", "LastActivityDate": "2021-07-31 06:36:22", "AnswerScore": 0, "reason": ["Index and rank are reserved keywords in SQL. "], "solution": ["Try changing it to something else. ", "But if you want to use index only then use below. -CODE-"], "answer_code": ["@Table(name = \"\\\"index\\\"\")\n"], "environment": ["java", "hibernate", "entity"], "symptom": ["I thought it was because of the float, but my Field table has a float and is being generated correctly. ", "I was trying to change dialect or create-drop property. ", "Index entity: -CODE-. "], "exception_stack": ["org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table index (id integer not null, lemma_id integer not null, page_id integer not null, rank float not null, primary key (id)) engine=MyISAM\" via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:439)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlStrings(SchemaCreatorImpl.java:423)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:314)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:166)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\n    at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:156)\n    at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:73)\n    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:318)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468)\n    at loader.Loader.main(Loader.java:22)\nCaused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index (id integer not null, lemma_id integer not null, page_id integer not null,' at line 1\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n    at com.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:762)\n    at com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:646)\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n    ... 11 more\n"], "code": ["    <!DOCTYPE hibernate-configuration PUBLIC\n        \"-//Hibernate/Hibernate Configuration DTD 3.0//EN\"\n        \"http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd\">\n<hibernate-configuration>\n    <session-factory>\n        <property name=\"connection.driver_class\">com.mysql.cj.jdbc.Driver</property>\n        <property name=\"connection.url\">jdbc:mysql://localhost:3306/search_engine?useSSL=false</property>\n        <property name=\"connection.username\">root</property>\n        <property name=\"connection.password\">roottoor</property>\n        <property name=\"connection.pool_size\">10</property>\n        <property name=\"dialect\">org.hibernate.dialect.MySQL5Dialect</property>\n        <property name=\"show_sql\">true</property>\n        <property name=\"current_session_context_class\">thread</property>\n        <property name=\"hbm2ddl.auto\">create-drop</property>\n\n        <mapping class=\"loader.scanner.Website\"></mapping>\n        <mapping class=\"loader.entity.Field\"></mapping>\n        <mapping class=\"loader.entity.Lemma\"></mapping>\n        <mapping class=\"loader.entity.Index\"></mapping>\n\n    </session-factory>\n</hibernate-configuration>\n", "package loader.entity;\n\nimport javax.persistence.*;\n\n@Entity\n@Table(\n        name = \"index\"\n)\npublic class Index {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    @Column(\n            name = \"page_id\",\n            nullable = false\n    )\n    private int pageId;\n\n    @Column(\n            name = \"lemma_id\",\n            nullable = false\n    )\n    private int lemmaId;\n\n    @Column(\n            nullable = false\n    )\n    private float rank;\n\n    public Index(int pageId, int lemmaId, float rank) {\n        this.pageId = pageId;\n        this.lemmaId = lemmaId;\n        this.rank = rank;\n    }\n\n    public Index(){\n\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public int getPageId() {\n        return pageId;\n    }\n\n    public void setPageId(int pageId) {\n        this.pageId = pageId;\n    }\n\n    public int getLemmaId() {\n        return lemmaId;\n    }\n\n    public void setLemmaId(int lemmaId) {\n        this.lemmaId = lemmaId;\n    }\n\n    public float getRank() {\n        return rank;\n    }\n\n    public void setRank(float rank) {\n        this.rank = rank;\n    }\n\n    @Override\n    public String toString() {\n        return \"Index{\" +\n                \"id=\" + id +\n                \", pageId=\" + pageId +\n                \", lemmaId=\" + lemmaId +\n                \", rank=\" + rank +\n                '}';\n    }\n}\n"], "exception_stack_rank": 4, "title_rank": 2, "exception_message": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"create table index (id integer not null, lemma_id integer not null, page_id integer not null, rank float not null, primary key (id)) engine=MyISAM\" via JDBC Statement\nCaused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'index (id integer not null, lemma_id integer not null, page_id integer not null,' at line 1\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n", "exception_stack_score": 88}, {"answer_id": "68514218", "title": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"CREATE FUNCTION\"", "Score": 0, "ViewCount": 75, "LastEditDate": "", "LastActivityDate": "2021-07-25 04:02:22", "AnswerScore": 0, "reason": [], "solution": ["Can you try single quotes instead of backticks in first line. ", "Change: -CODE-. "], "answer_code": ["DEFINER=`root`@`localhost` FUNCTION `CalcDistance` \n", "DEFINER='root'@'localhost' FUNCTION 'CalcDistance' (Note single quotes) \n", "CREATE DEFINER = 'admin'@'localhost' PROCEDURE account_count()\nBEGIN\n  SELECT 'Number of accounts:', COUNT(*) FROM mysql.user;\nEND;\n"], "environment": ["sql script", "jpa", "mysql workbench", "persistence.xml", "java", "mysql", "hibernate"], "symptom": ["I am trying to create a function that calculates the distance between 2 points (longitude and latitude wise. using an SQL script while running the application by specifying in the persistence.xml: -CODE-", "But I am having a CommandAcceptanceException and cannot figure out why. ", "I even tried to use: -CODE-. but still does not work and it gives the following error-CODE-", "Changing the dialect of MySQL did not help either. ", "If I try to open the script in MySQL workbench and run it works fine and I can see the function added. ", "I even tried to add a delimiter before and after it. "], "exception_stack": ["\n00:06:21,512 INFO  [stdout] (ServerService Thread Pool -- 72)\nHibernate: CREATE FUNCTION CalcDistance( Lat1 DOUBLE, Long1 DOUBLE,\nLat2 DOUBLE, Long2 DOUBLE ) RETURNS double\n00:06:21,513 WARN\n[org.hibernate.tool.schema.internal.ExceptionHandlerLoggedImpl]\n(ServerService Thread Pool -- 72) GenerationTarget encountered\nexception accepting command : Error executing DDL \"CREATE FUNCTION\nCalcDistance( Lat1 DOUBLE, Long1 DOUBLE, Lat2 DOUBLE, Long2 DOUBLE )\nRETURNS double\" via JDBC Statement:\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error\nexecuting DDL \"CREATE FUNCTION CalcDistance( Lat1 DOUBLE, Long1\nDOUBLE, Lat2 DOUBLE, Long2 DOUBLE ) RETURNS double\" via JDBC Statement\nat\norg.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\nat\norg.hibernate.tool.schema.internal.SchemaCreatorImpl.applySqlString(SchemaCreatorImpl.java:440)\nat\norg.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromScript(SchemaCreatorImpl.java:192)\nat\norg.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:162)\nat\norg.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:135)\nat\norg.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:121)\nat\norg.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:129)\nat\norg.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\nat\norg.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:310)\nat\norg.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467)\nat\norg.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:939)\nat\norg.jboss.as.jpa.hibernate5.TwoPhaseBootstrapImpl.build(TwoPhaseBootstrapImpl.java:44)\nat\norg.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:167)\nat\norg.jboss.as.jpa.service.PersistenceUnitServiceImpl$1$1.run(PersistenceUnitServiceImpl.java:125)\nat\norg.wildfly.security.manager.WildFlySecurityManager.doChecked(WildFlySecurityManager.java:650)\nat\norg.jboss.as.jpa.service.PersistenceUnitServiceImpl$1.run(PersistenceUnitServiceImpl.java:209)\nat\norg.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\nat\norg.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1985)\nat\norg.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1487)\nat\norg.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1378)\nat java.lang.Thread.run(Thread.java:748)    at\norg.jboss.threads.JBossThread.run(JBossThread.java:485) Caused by:\njava.sql.SQLSyntaxErrorException: You have an error in your SQL\nsyntax; check the manual that corresponds to your MySQL server version\nfor the right syntax to use near '' at line 1     at\ncom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118)\nat\ncom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:95)\nat\ncom.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\nat\ncom.mysql.cj.jdbc.StatementImpl.executeInternal(StatementImpl.java:790)\nat com.mysql.cj.jdbc.StatementImpl.execute(StatementImpl.java:675)\nat\norg.jboss.jca.adapters.jdbc.WrappedStatement.execute(WrappedStatement.java:198)\nat\norg.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:54)\n... 21 more\n"], "code": ["<property name=\"javax.persistence.schema-generation.create-script-source\"\n           value=\"calculate_distance_function.sql\" />\n", "<property name=\"javax.persistence.sql-load-script-source\"\n          value=\"calculate_distance_function.sql\" />\n", "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<persistence xmlns=\"http://xmlns.jcp.org/xml/ns/persistence\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/persistence\n             http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd\"\n    version=\"2.1\">\n\n    <persistence-unit name=\"Persistence\"\n        transaction-type=\"JTA\">\n        <provider>org.hibernate.jpa.HibernatePersistenceProvider</provider>\n\n        <jta-data-source>java:jboss/datasources/tontapatt_db</jta-data-source>\n        \n        <class>fr.eql.ai109.tontapatt.entity.ZipCodeCity</class>\n        <properties>\n            <property\n                name=\"javax.persistence.schema-generation.database.action\"\n                value=\"create\" />\n            <property name=\"hibernate.show_sql\" value=\"true\" />\n            <property name=\"hibernate.dialect\"\n                value=\"org.hibernate.dialect.MySQL8Dialect\" />\n          <property name=\"javax.persistence.schema-generation.create-script-source\"\n           value=\"calculate_distance_function.sql\" />\n        <!--        <property name=\"javax.persistence.sql-load-script-source\"\n          value=\"calculate_distance_function.sql\" /> -->\n        </properties>\n    </persistence-unit>\n\n</persistence>\n", "CREATE DEFINER=`root`@`localhost` FUNCTION `CalcDistance`( Lat1 DOUBLE, Long1 DOUBLE, Lat2 DOUBLE, Long2 DOUBLE ) RETURNS double \nBEGIN \nDECLARE r INT;    \nDECLARE phi1 DOUBLE;    \nDECLARE phi2 DOUBLE;    \nDECLARE dphi DOUBLE;    \nDECLARE dlam DOUBLE;    \nDECLARE a DOUBLE;    \nDECLARE c DOUBLE;    \nDECLARE d DOUBLE;\nSET r = 6371000;    \nSET phi1 = Lat1 * PI() / 180;    \nSET phi2 = Lat2 * PI() / 180;    \nSET dphi = ( Lat2 - Lat1 ) * PI() / 180;    \nSET dlam = ( Long2 - Long1 ) * PI() / 180;   \nSET a = SIN( dphi / 2 ) * SIN( dphi / 2 ) + COS( phi1 ) * COS( phi2 ) * SIN( dlam / 2 ) * SIN( dlam / 2 );    \nSET c = 2 * ATAN2( SQRT( a ), SQRT( 1 - a ) );    \nSET d = r * c / 1000;    \nRETURN d;    \nEND\n"], "exception_message_rank": 28, "exception_stack_rank": 6, "title_rank": 13, "exception_message": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error\njava.sql.SQLSyntaxErrorException: You have an error in your SQL\ncom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:118)\ncom.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:95)\ncom.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n", "exception_message_score": 16, "exception_stack_score": 82}, {"answer_id": "60660709", "title": "SQLException while adding new fields to existing @Entity (jpa)", "Score": 0, "ViewCount": 94, "LastEditDate": "2020-03-15 10:30:13", "LastActivityDate": "2020-03-26 00:07:12", "AnswerScore": 0, "reason": [], "solution": ["Search for that error message. ", "Here's one answer that lists some options: https://stackoverflow.com/a/56976063/1766831. "], "answer_code": [], "environment": ["spring", "server", "jpa", "java", "mariadb", "mysql"], "symptom": ["I had a model that for example looks like this: -CODE-. ", "I ran it on the server, the app (a Spring Boot application. worked with this table for a while and I decided that I need another field: -CODE-", "But when I run the app on the server again I get such exceptions: -CODE-. ", "Why does it happening and how to add new fields to my entity. ", "I have a property jpa.hibernate.ddl-auto: update. ", "The funniest part is that the field and it's \"map collection. are added to the db correctly, it's just there is this strange constraint error for this new field"], "exception_stack": ["org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table my_table_my_additional_field add constraint FK35gbk1v4oaclmxu6onjiopln0 foreign key (my_table_my_id) references my_table (my_id)\" via JDBC Statement\n...\nCaused by: java.sql.SQLException: Can't create table `my_database_name`.`#sql-7f7_4531` (errno: 150 \"Foreign key constraint is incorrectly formed\")\n"], "code": ["import javax.persistence.ElementCollection;\nimport javax.persistence.Entity;\nimport javax.persistence.FetchType;\nimport javax.persistence.Id;\nimport javax.validation.constraints.NotNull;\nimport java.math.BigDecimal;\nimport java.util.Map;\n\n@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@RequiredArgsConstructor\n@Getter\npublic class MyTable {\n\n    @Id\n    long myId;\n\n    @NotNull\n    String myField_1;\n\n    @ElementCollection(fetch = FetchType.EAGER)\n    @NonNull\n    Map<Integer, BigDecimal> myField_2;\n}\n", "    @ElementCollection(fetch = FetchType.EAGER)\n    @NonNull\n    Map<Integer, BigDecimal> myAdditionalField;\n"], "exception_message_rank": 3, "exception_stack_rank": 0, "exception_message": "org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL \"alter table my_table_my_additional_field add constraint FK35gbk1v4oaclmxu6onjiopln0 foreign key (my_table_my_id) references my_table (my_id)\" via JDBC Statement\nCaused by: java.sql.SQLException: Can't create table `my_database_name`.`#sql-7f7_4531` (errno: 150 \"Foreign key constraint is incorrectly formed\")\n", "exception_message_score": 91, "exception_stack_score": 100}, {"answer_id": "23688213", "title": "SQL Syntax Error Creating Table", "Score": -1, "ViewCount": 47, "LastEditDate": "2014-05-16 03:10:27", "LastActivityDate": "2014-05-16 03:10:27", "AnswerScore": 1, "reason": ["references is a reserved word in MySQL. "], "solution": ["Either use backticks to escape it or use another name. -CODE-"], "answer_code": ["stmt.executeUpdate(\"CREATE TABLE `\" + REFERENCE_TABLE + \"` (\"\n                                 ^-----------------------^-----------here\n"], "environment": ["i", "mysql server", "jdbc", "sql database", "java", "mysql"], "symptom": ["I am getting the following error when I try to create a table in an SQL database: -CODE-. ", "And here are the declarations of the variables used: -CODE-. ", "Also, I am creating two tables before this one that successfully work with basically the exact same syntax as this one, which is failing. ", "Also, the MySQL server I am putting this databases into is fresh and just set-up, so there shouldn't be any configuration issues, as my program is connecting to the database successfully. ", "Notes: I have tried to do the reference ID line with an identity, but that did not make any difference. ", "As I said before, the two functions each creating a table before this used exactly the same syntax, but gave no errors and successfully created their tables. "], "exception_stack": ["Failed to create table 'references'\ncom.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in \nyour SQL syntax; check the manual that corresponds to your MySQL server version for \nthe right syntax to use near 'references(referenceID BIGINT NOT NULL AUTO_INCREMENT, \nreferenceText VARCHAR(255)'\n"], "code": ["public void createReferencesTable() {\n    System.out.println(\"Creating table '\" + REFERENCE_TABLE + \"'...\");\n    Statement stmt = null;\n    try {\n        stmt = connection.createStatement();\n        stmt.executeUpdate(\"CREATE TABLE \" + REFERENCE_TABLE + \"(\"\n                + REFERENCE_ID + \" BIGINT NOT NULL AUTO_INCREMENT,\"\n                + REFERENCE_TEXT + \" VARCHAR(255),\"\n                + REFERENCE_TWEET + \" BIGINT NOT NULL,\"\n                + \"PRIMARY KEY (\" + REFERENCE_ID + \")\"\n                + \")\");\n        System.out.println(\"Table '\" + REFERENCE_TABLE + \"' created\");\n    } catch (SQLException e) {\n        System.err.println(\"Failed to create table '\" + REFERENCE_TABLE + \"'\");\n        e.printStackTrace();\n    } finally {\n        if (stmt != null) { \n            try {\n                stmt.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            } \n        }\n    }\n}\n", "public static final String REFERENCE_TABLE = \"references\";\npublic static final String REFERENCE_ID = \"referenceID\";\npublic static final String REFERENCE_TEXT = \"referenceText\";\npublic static final String REFERENCE_TWEET = \"referenceTweet\";\n"], "exception_stack_rank": 11, "title_rank": 17, "exception_message": "com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'references(referenceID BIGINT NOT NULL AUTO_INCREMENT, referenceText VARCHAR(255)'\n", "exception_stack_score": 67}]}))
  })
  </script>
</body>

</html>